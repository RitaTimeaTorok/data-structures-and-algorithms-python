<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Data Structures & Algorithms Visualizer</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <header class="container">
      <h1>Data Structures & Algorithms Visualizer</h1>
      <p>
        Pick an algorithm or Data Structure you want to visualize from the
        toolbar below
      </p>
    </header>

    <nav
      class="container toolbar"
      aria-label="Sorting algorithms and data structures"
    >
      <!-- Add data-type="sort" for sorting, data-type="ds" for data structures -->
      <button class="algo-btn" data-algo="bubble" data-type="sort">
        Bubble Sort
      </button>
      <button class="algo-btn" data-algo="insertion" data-type="sort">
        Insertion Sort
      </button>
      <button class="algo-btn" data-algo="merge" data-type="sort">
        Merge Sort
      </button>
      <button class="algo-btn" data-algo="quick" data-type="sort">
        Quick Sort
      </button>
      <button class="algo-btn" data-algo="linked-list" data-type="ds">
        Linked List
      </button>
      <button class="algo-btn" data-algo="stack" data-type="ds">Stack</button>
      <button class="algo-btn" data-algo="queue" data-type="ds">Queue</button>
    </nav>

    <main class="container viz">
      <div
        class="viz-placeholder"
        role="region"
        aria-label="Visualization area"
      >
        <div id="status-text" class="status-text">Ready</div>

        <!-- Sorting UI grouped for easy toggle -->
        <section
          id="sort-ui"
          class="sort-ui hidden"
          aria-label="Sorting visualization"
        >
          <div class="array-display" id="array-display">
            {% for num in array %}
            <div class="array-element" data-value="{{ num }}">{{ num }}</div>
            {% endfor %}
          </div>
          <div class="controls">
            <button id="start-btn" class="start-btn">
              Start Visualization
            </button>
          </div>
        </section>

        <!-- Clean canvas for Data Structures (empty for now) -->
        <section
          id="ds-canvas"
          class="ds-canvas hidden"
          data-stack="{{ stack_init | tojson }}"
          data-queue="{{ queue_init | tojson }}"
          data-linked="{{ linked_init | tojson }}"
        >
          <!-- Intentionally empty. Youâ€™ll render DS here later. -->
        </section>
      </div>

      <!-- STACK Controls (shown only when Stack is selected) -->
      <div
        id="ds-controls"
        class="input-panel ds-controls hidden"
        aria-label="Data Structure controls"
      >
        <div class="input-row">
          <input
            id="ds-push-value"
            type="text"
            placeholder="value to push (e.g., 42)"
          />
          <button id="ds-push-btn" class="start-btn" aria-label="Push to stack">
            Push
          </button>
          <button id="ds-pop-btn" class="start-btn" aria-label="Pop from stack">
            Pop
          </button>
        </div>
        <div class="helper-text">
          Select <strong>Stack</strong> above, then use Push/Pop. (Values can be
          numbers or text.)
        </div>
      </div>
      <!-- QUEUE Controls (shown only when Queue is selected) -->
      <div
        id="queue-controls"
        class="input-panel ds-controls hidden"
        aria-label="Queue controls"
      >
        <div class="input-row">
          <input
            id="queue-enqueue-value"
            type="text"
            placeholder="value to enqueue (e.g., 7)"
          />
          <button id="queue-enqueue-btn" class="start-btn" aria-label="Enqueue">
            Enqueue
          </button>
          <button id="queue-dequeue-btn" class="start-btn" aria-label="Dequeue">
            Dequeue
          </button>
        </div>
        <div class="helper-text">
          Select <strong>Queue</strong> above, then use Enqueue/Dequeue.
        </div>
      </div>

      <!-- Custom input + file upload panels: only visible for sorting -->
      <div class="input-panel hidden" id="custom-array-panel">
        <label for="array-input">Custom input (comma-separated numbers):</label>
        <div class="input-row">
          <input
            id="array-input"
            type="text"
            placeholder="e.g., 5, 3, 1, 4, 2"
          />
          <button id="apply-array" class="start-btn">Submit</button>
        </div>
        <div id="array-error" class="error-text" aria-live="polite"></div>
      </div>

      <div class="input-panel file-panel hidden" id="file-upload-panel">
        <label for="array-file"
          >Upload CSV/TXT (comma-separated numbers):</label
        >
        <div class="input-row">
          <input id="array-file" type="file" accept=".csv,text/csv,.txt" />
          <button id="upload-array" class="start-btn">Upload</button>
        </div>
        <div id="file-error" class="error-text" aria-live="polite"></div>
      </div>
    </main>

    <script src="{{ url_for('static', filename='js/ds.js') }}"></script>
    <script src="{{ url_for('static', filename='js/sort.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
